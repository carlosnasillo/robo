<!--
  ~ Copyright (c) 2015 PDX Technology, All rights reserved.
  ~
  ~ Unpublished copyright. All rights reserved. This material contains
  ~ proprietary information that shall be used or copied only with
  ~ PDX Technology, except with written permission of PDX Technology.
  -->

<sidebar></sidebar>

<div id="wrapper">
    <div class="content">
        <spinner></spinner>
        <div class="row">
            <div class="hpanel col-sm-3 col-lg-2 col-lg-offset-2 text-center">
                <div class="panel-body strategies-top-menu" data-ng-click="vm.goToPrimaryMarket()">
                    <p>Strategy</p>
                    <p>Primary market</p>
                </div>
                <div class="panel-footer" data-ng-class="{'blue-footer': vm.market == 'primary'}">
                </div>
            </div>
            <div class="hpanel col-sm-3 col-lg-2 text-center">
                <div class="panel-body strategies-top-menu" data-ng-click="vm.goToSecondMarket()">
                    <p>Strategy</p>
                    <p>Secondary market</p>
                </div>
                <div class="panel-footer" data-ng-class="{'blue-footer': vm.market == 'secondary'}">
                </div>
            </div>
            <div class="hpanel col-sm-3 col-lg-2 text-center">
                <div class="panel-body strategies-top-menu">
                    <p>Strategy</p>
                    <p>Sell</p>
                </div>
                <div class="panel-footer">
                </div>
            </div>
            <div class="hpanel col-sm-3 col-lg-2 text-center">
                <div class="panel-body strategies-top-menu">
                    <p>History</p>
                </div>
                <div class="panel-footer">
                </div>
            </div>
        </div>
        <div class="row" ui-sortable="vm.sortableOptions" ng-model="vm.rules">
            <div class="col-sm-12" data-ng-repeat="rule in vm.rules">
                <div class="hpanel hblue" data-drag="true" jqyoui-draggable jqyoui-draggable="{animate:true}" data-jqyoui-options="{revert: 'invalid'}">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-9">
                                <h4>#{{ $index + 1 }} {{ rule.name | titlecase }}</h4>

                                <div class="row m-t-md">
                                    <div class="col-sm-3">
                                        <div class="project-label font-uppercase">Estimated Return</div>
                                        <small>{{ rule.expectedReturn.percent | percent : 2 }} Â± {{ rule.expectedReturn.margin | percent : 2 }}</small>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="project-label font-uppercase">Loans available per week</div>
                                        <small>{{ rule.loansAvailablePerWeek }}</small>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="project-label font-uppercase">$ available per week</div>
                                        <small>{{ rule.moneyAvailablePerWeek | currency }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3 project-info">
                                <div class="project-action m-t-md">
                                    <div class="btn-group">
                                        <button class="btn btn-xs btn-default" data-ng-click="vm.editRule(rule.id)"> Edit</button>
                                        <button class="btn btn-xs {{ rule.pause ? 'btn-warning' : 'btn-default'}}" data-ng-click="vm.pause(rule)"> Pause</button>
                                        <button class="btn btn-xs btn-default" data-ng-click="vm.delete(rule)"> Delete</button>
                                    </div>
                                </div>
                                <div class="project-value">
                                    <h2 class="text-info">
                                        {{ rule.expectedReturn.value | currency }}
                                    </h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        Based on <b>{{ rule.criteria.length }}</b> {{ rule.criteria.length > 1 ? 'criteria' : 'criterion' }}
                    </div>
                </div>
            </div>
            <div class="ui-sortable-placeholder col-sm-12 new-rule" data-ng-click="vm.newRule()">
                <h1 class="new-rule-title">New Strategy</h1>
            </div>
        </div>
    </div>
</div>
