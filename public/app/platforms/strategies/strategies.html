<!--
  ~ Copyright (c) 2015 PDX Technology, All rights reserved.
  ~
  ~ Unpublished copyright. All rights reserved. This material contains
  ~ proprietary information that shall be used or copied only with
  ~ PDX Technology, except with written permission of PDX Technology.
  -->

<sidebar></sidebar>

<div id="wrapper">
    <div class="content">
        <div id="minimalize-content" minimaliza-sidebar style="display: none;"></div>
        <div class="row">
            <div class="hpanel col-sm-3 col-lg-2 col-lg-offset-2 text-center">
                <div class="panel-body strategies-top-menu" data-ng-click="vm.goToPrimaryMarket()" data-ng-class="{'blue-box': vm.market == 'primary'}">
                    <p>Strategy</p>
                    <p>Primary market</p>
                </div>
            </div>
            <div class="hpanel col-sm-3 col-lg-2 text-center">
                <div class="panel-body strategies-top-menu strategy-secondary-market">
                    <p>Strategy</p>
                    <p>Secondary market</p>
                    <p class="coming-soon">Coming soon</p>
                </div>
            </div>
            <div class="hpanel col-sm-3 col-lg-2 text-center">
                <div class="panel-body strategies-top-menu strategy-sell">
                    <p>Strategy</p>
                    <p>Sell</p>
                    <p class="coming-soon">Coming soon</p>
                </div>
            </div>
            <div class="hpanel col-sm-3 col-lg-2 text-center">
                <div class="panel-body strategies-top-menu strategy-history">
                    <p>History</p>
                    <p class="coming-soon">Coming soon</p>
                </div>
            </div>
        </div>
        <div class="row" ui-sortable="vm.sortableOptions" ng-model="vm.strategies">
            <div class="col-sm-12" data-ng-repeat="strategy in vm.strategies">
                <div class="hpanel hblue" data-drag="true" jqyoui-draggable jqyoui-draggable="{animate:true}" data-jqyoui-options="{revert: 'invalid'}">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-9">
                                <h4>#{{ $index + 1 }} {{ strategy.name | titlecase }}</h4>

                                <div class="row m-t-md">
                                    <div class="col-sm-4">
                                        <div class="project-label font-uppercase">Estimated Return</div>
                                        <small>{{ strategy.expectedReturn.percent | percent : 2 }} Â± {{ strategy.expectedReturn.margin | percent : 2 }}</small>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="project-label font-uppercase">Loans available per week</div>
                                        <small>{{ strategy.loansAvailablePerWeek }}</small>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="project-label font-uppercase">$ available per week</div>
                                        <small>{{ strategy.moneyAvailablePerWeek | currency }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3 project-info">
                                <div class="project-action m-t-md">
                                    <div class="btn-group">
                                        <button class="btn btn-xs btn-default" data-ng-click="vm.editStrategy(strategy.id)"> Edit</button>
                                        <button class="btn btn-xs {{ strategy.isEnabled ? 'btn-default' : 'btn-warning'}}" data-ng-click="vm.pause(strategy)"> Pause</button>
                                        <button class="btn btn-xs btn-default" data-ng-click="vm.delete(strategy)"> Delete</button>
                                    </div>
                                </div>
                                <div class="project-value">
                                    <h2 class="text-info">
                                        {{ strategy.expectedReturn.value | currency }}
                                    </h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        Based on <b>{{ strategy.rules.length }}</b> {{ strategy.rules.length > 1 ? 'rule' : 'rules' }}
                    </div>
                </div>
            </div>
            <div class="ui-sortable-placeholder col-sm-12 new-rule" data-ng-click="vm.newStrategy()">
                <h1 class="new-rule-title">New Strategy</h1>
            </div>
        </div>
    </div>
    <footer class="footer">
        <span class="pull-right">
            PDX Technology 2016
        </span>
        PDX Robo
    </footer>
</div>
